=====
$rand
=====

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. query:: $rand

   *Syntax*: ``{$rand: {} }``

   :query:`$rand` generates a random value between 0 and 1 each time it
   is called.

   Consider the following example:

   This code creates a small collection with 100 documents which we will
   use in this example. (Increase the value of ``N`` if you want to
   experiment with larger data sets).

   .. code-block:: javascript

      N = 100
      bulk = db.collection.initializeUnorderedBulkOp()
      for (i = 0; i < N; i++) { bulk.insert({_id: i, r: 0}) }
      bulk.execute()

   The ``$rand`` operator can be used to select random documents from a
   collection. In this example we use the database just created and
   select about half the documents.

   .. code-block:: javascript

      db.collection.find(
                          {
                            $expr:
                              {
                                $lt: [0.5, {$rand: {} } ]
                              }
                           }
                        ).count()

   .. code-block:: javascript
      :copyable: false

      // Output of 5 runs on the sample collection
      51
      53
      49
      45
      47

   .. note::

      This example returns different results each time. Smaller data
      sets show more variability in repeated runs. The number of
      documents selected each time approaches the expected value (in
      this case 50%) as the collection size grows.

   .. seealso::

      :expression:`$let`, :expression:`$rand`.

